# ğŸ“¦ mysql-backup-manager

## ğŸ¯ ëª©í‘œ
- docker volumeì„ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆ ë…ë¦½ì ì¸ ë°ì´í„° ì €ì¥ê³¼ ì‹ ì†í•œ ë³µì›
- ì£¼ê¸°ì ìœ¼ë¡œ backup íŒŒì¼ì„ ì €ì¥í•˜ì—¬ ì•ˆì •ì„± ë³´ì¥ (í˜„ì¬ëŠ” í˜¸ìŠ¤íŠ¸ì— ì €ì¥í•˜ê³  ìˆìœ¼ë‚˜, í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ì™€ ê°™ì€ ì›ê²© ì €ì¥ì†Œì— ì €ì¥)

## ğŸ“Œ í•„ìš”ì„±

1. **ë°ì´í„° ì•ˆì •ì„± í™•ë³´**:  
   ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ìì‚°ì´ë‹¤. ë°ì´í„° ì†ì‹¤ì´ë‚˜ ì†ìƒìœ¼ë¡œ ì¸í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì¤‘ë‹¨ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì•ˆì •ì ì¸ ë°ì´í„° ì €ì¥ ë° ë°±ì—… ì „ëµì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ì´ ë°©ì‹ì€ Docker ë³¼ë¥¨ê³¼ ì£¼ê¸°ì ì¸ ë°±ì—…ì„ í†µí•´ ë°ì´í„°ì˜ ì•ˆì •ì„±ì„ ë³´ì¥í•œë‹¤.

2. **ë¹ ë¥¸ ë³µêµ¬ ëŠ¥ë ¥**:  
   ì‹œìŠ¤í…œ ì¥ì• ë‚˜ ë°ì´í„° ì†ì‹¤ì´ ë°œìƒí–ˆì„ ë•Œ, ì‹ ì†í•˜ê²Œ ë°ì´í„°ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ë³¼ë¥¨ê³¼ ë°±ì—… íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¦‰ì‹œ ë³µì›í•  ìˆ˜ ìˆëŠ” ì²´ê³„ë¥¼ ë§ˆë ¨í•˜ì—¬ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì‹œê°„ì„ ìµœì†Œí™”í•œë‹¤.

3. **íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬**:  
   Dockerë¥¼ ì´ìš©í•œ ì»¨í…Œì´ë„ˆ í™˜ê²½ì—ì„œ ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ë©´ ë°ì´í„° ì €ì¥ê³¼ ê´€ë¦¬ê°€ ê°„í¸í•˜ë‹¤. ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ë‹¤ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©° ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ê°€ ìš©ì´í•˜ë‹¤.

4. **ì£¼ê¸°ì  ë°ì´í„° ë³´í˜¸**:  
   Cronì„ í™œìš©í•œ ì£¼ê¸°ì ì¸ ë°±ì—… ì„¤ì •ì€ ë°ì´í„°ë¥¼ ì •ê¸°ì ìœ¼ë¡œ ë³´í˜¸í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì‚¬ìš©ìê°€ ì„¤ì •í•œ ì£¼ê¸°ì— ë”°ë¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ë°±ì—…í•˜ì—¬ ë°ì´í„° ì†ì‹¤ì˜ ìœ„í—˜ì„ ìµœì†Œí™”í•œë‹¤.

5. **ì›ê²© ì €ì¥ì†Œ ì—°ê³„ ê°€ëŠ¥ì„±**:  
   í˜„ì¬ í˜¸ìŠ¤íŠ¸ì— ë°±ì—… íŒŒì¼ì„ ì €ì¥í•˜ê³  ìˆì§€ë§Œ, í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ì™€ ê°™ì€ ì›ê²© ì €ì¥ì†Œì— ì €ì¥í•¨ìœ¼ë¡œì¨ ë°ì´í„°ì˜ ì•ˆì „ì„±ì„ ë”ìš± ë†’ì¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” hostì˜ ì €ì¥ì†Œì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë³µêµ¬ í•  ìˆ˜ ìˆë‹¤.

6. **ë¹„ì¦ˆë‹ˆìŠ¤ ì—°ì†ì„± ë³´ì¥**:  
   ì•ˆì •ì ì´ê³  ì‹ ì†í•œ ë°ì´í„° ê´€ë¦¬ ë° ë°±ì—… ì²´ê³„ë¥¼ ê°–ì¶”ëŠ” ê²ƒì€ ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ì—°ì†ì„±ì„ ë³´ì¥í•œë‹¤. ë°ì´í„° ê´€ë¦¬ì— ëŒ€í•œ í™•ì‹¤í•œ ì „ëµì´ ìˆìœ¼ë©´ ê³ ê°ì˜ ì‹ ë¢°ë¥¼ ì–»ê³  ì„œë¹„ìŠ¤ í’ˆì§ˆì„ ìœ ì§€í•˜ëŠ” ë° ê¸°ì—¬í•œë‹¤.

  
## ğŸ”§ ì„¤ì •

### Docker Compose ì„¤ì •
```yaml
version: '3.8'

services:
  db1:
    image: mysql:latest
    container_name: mysql_database
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: database1
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:  # DBê°€ ì‚¬ìš©í•  ë³¼ë¥¨
```

### ë°ì´í„° ì‚½ì… ìŠ¤í¬ë¦½íŠ¸
```bash
#!/bin/bash

# MySQL ì»¨í…Œì´ë„ˆ ì´ë¦„
CONTAINER_NAME="mysql_database"  # ì‹¤ì œ ì»¨í…Œì´ë„ˆ ì´ë¦„
# MySQL ì‚¬ìš©ì ì´ë¦„
MYSQL_USER="root"  # ì‚¬ìš©ì ì´ë¦„
# MySQL ë¹„ë°€ë²ˆí˜¸
MYSQL_PASSWORD="root"  # ë¹„ë°€ë²ˆí˜¸
# ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
DATABASE_NAME="database1"  # ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
# SQL ëª…ë ¹ì–´ (ë°ì´í„° ì‚½ì…)
SQL_COMMAND="INSERT INTO your_table_name (column1, column2) VALUES ('value1', 'value2');"

# MySQLì— ë°ì´í„° ì‚½ì…
docker exec -i "$CONTAINER_NAME" mysql -u"$MYSQL_USER" -p"$MYSQL_PASSWORD" "$DATABASE_NAME" -e "$SQL_COMMAND"

echo "ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚½ì…ë˜ì—ˆìŠµë‹ˆë‹¤."
```

### í…Œì´ë¸” ìƒì„±
```sql
CREATE TABLE table1 ( column1 VARCHAR(255), column2 VARCHAR(255) );
```

### ë°ì´í„° í™•ì¸
```sql
mysql> select * from table1;
+---------+---------+
| column1 | column2 |
+---------+---------+
| value1  | value2  |
+---------+---------+
```

## ğŸš€ ì»¨í…Œì´ë„ˆ ì‚­ì œ ë° ì¬ìƒì„±
```bash
docker-compose down
docker-compose up
```

### ì¬ìƒì„± í›„ ë°ì´í„° í™•ì¸
```sql
mysql> select * from table1;
+---------+---------+
| column1 | column2 |
+---------+---------+
| value1  | value2  |
+---------+---------+
```
- ì´ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆê°€ ì‚­ì œë˜ê³  ë‹¤ì‹œ ì¬ìƒì„± ë˜ì–´ë„ ë°ì´í„°ë² ì´ìŠ¤ì˜ dataê°€ ë³´ì¡´ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.

## ğŸ’¾ ì£¼ê¸°ì ì¸ ë°ì´í„° ë°±ì—…
```bash
#!/bin/bash
current_date=$(date +"%Y-%m-%d_%H-%M-%S")

# MySQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í˜¸ìŠ¤íŠ¸ì— ë°±ì—…
docker exec mysql_database sh -c "tar czf - /var/lib/mysql" > path/mysql_backup_$current_date.tar.gz
```

## ğŸ“… Cron ì„¤ì • (ì˜¤í›„ 6ì‹œë§ˆë‹¤ ë°±ì—…)
```bash
0 18 * * * /home/username/mysql-backup-manager/copyVolume.sh
```

## ğŸ“‚ íŒŒì¼ êµ¬ì¡°
```
.
â”œâ”€â”€ addData.sh
â”œâ”€â”€ backup
â”‚   â”œâ”€â”€ mysql_backup_2024-09-27_15-24-01.tar.gz
â”‚   â”œâ”€â”€ mysql_backup_2024-09-27_15-25-01.tar.gz
â”‚   â”œâ”€â”€ mysql_backup_2024-09-27_15-26-01.tar.gz
â”‚   â”œâ”€â”€ mysql_backup_2024-09-27_15-27-01.tar.gz
â”‚   â””â”€â”€ mysql_backup_2024-09-27_15-28-01.tar.gz
â”œâ”€â”€ copyVolume.sh
â”œâ”€â”€ cron.log
â””â”€â”€ docker-compose.yml
```
